---
date : 2023-09-10
title : 카카오본인인증 적용기 part1
categories : [cert]
---

핫한걸 좋아하는 대표님, 어디선가 또 뭘 듣고 오셨나 보다

갑자기 인증시스템을 만들자고 하신다.

유지보수도 힘든데 뭔 말만하면 된다고 생각하는지 하...

![자연인](https://i.namu.wiki/i/XuBEDfxpzZBHJJKtQ_i0KpkVB6EM5nMwXFStVcF3kiYc17weyRvMiMzM2gOoebd5Wo-CchNIozM42HJEYAVPrCb_wPcR8Gc4x2ylYRMj0coKCc-hlyaVJy_RfCGw5nRqIu_CQMZv77EEkonMt224cA.webp)
_아마도 그때 내모습_ 출처 : 나는 자연인이다.

태연하게 구글을 켜본다. 일단은 카카오인증부터 찾아본다.

다행이다. 관련 업체를 정리한 [페이지](https://business.kakao.com/info/kakaocertification/)가 있다. 고맙다 카카오

개발 가이드를 제공하는 업체는 한 3~4 곳이며 툴킷으로 제공하는 업체가 많고, api나 sdk 를 제공하는 곳은 한곳 정도 있다.

난 코드 한줄도 적게 치고 싶었고 당연하게도 sdk 지원해주는 업체를 확인한다.
_(하... 진짜 이 업체도 사이트 찾다가 패밀리 사이트에서 개발자 센터를 발견했다.. 좀 보이는곳에 뒀으면...)_

보다보니 시퀀스 다이어그램도 있더라 별로 어렵지 않은것 같네?(이러면 꼭 오래걸리던데...)

![시퀀스다이어그램](https://developers.barocert.com/images/document/guide/kakao/identity-channel-message-diagram.webp)
_인증 처리_ 출처 : https://developers.barocert.com/guide/kakao/identity/java/intersection/kakao-identity

결론은 **[인증요청 -> 상태확인 -> 검증]** 패턴이더라 다른 인증서비스도 있어서 봤는데 다 똑같네!

API 레퍼런스는 건너뛰고 SDK를 눌러본다. 다운... 프로젝트 오픈... 실행... 개발끝...은 개뿔... 오류가 난다...

```
Exception.code : -99010013
Exception.message : 인증정보(LinkID, SecretKey)를 변경하여 주시기 바랍니다.
```

아 그냥 바로는 안되는것 같아서 대표에게 요청해서 신청해달라고 한다.
점심먹고 돌아오니 업체에서 인증정보를 보내준것 같다.

다시 실행해본다. 오류가 또 난다.


``` 
java.security.InvalidKeyException: Illegal key size 
```

구글에 검색하니 바로 나온다. java 1.6 ,1.7, 1.8인 경우 JCE 정책 변경이 필요하다고 한다.

혹시 몰라 버전별로 링크를 걸어논다. 

JAVA 6 : https://www.oracle.com/java/technologies/jce-6-download.html   
JAVA 7 : https://www.oracle.com/java/technologies/javase-jce7-downloads.html   
JAVA 8 : https://www.oracle.com/kr/java/technologies/javase-jce8-downloads.html

local_policy.jar, US_export_policy.jar 파일을 <JAVA_HOME>/jre/lib/security/ 디렉토리로 옮긴다

 정상적으로 작동한다.

![카카오예제](/assets/img/kakao_example.png?raw=true)

예제 디자인이 좀 옛날 디자인이지만 어차피 쓸건 아니니 상관 없을것 같다.

이제 DB 설계랑 화면이 남았다... 

나머지는 2부에서...
