---
date : 2021-03-15
title : http완벽가이드 1장
categories : http
---

# HTTP 개관

## WILL KNOW
- 얼마나 많은 클라이언트와 서버가 통신하는지
- 리소스(웹 콘텐츠)가 어디서 오는지
- 웹 트랜잭션이 어떻게 동작하는지
- HTTP 통신을 위해 사용하는 메시지의 형식
- HTTP 기저의 TCP 네트워크 전송
- 어러 종류의 HTTP 프로토콜
- 인터넷 곳곳에 설치된 다양한 HTTP구성요소

1.1 HTTP 인터넷의 멀티미디어 배달부

- HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하기 때문에, 전송 중 손상되거나 꼬이지 않음을 보장한다.
- 개발자는 인터넷의 결함이나 양점에 대한 걱정 없이 애플리케이션 고유 기능을 구현하는데 집중할 수 있다.

1.2 웹 클라이언트와 서버

- 웹 서버는 HTTP 프로토콜로 의사소통하기 때문에 보통 HTTP 서버라고 불린다. 
- 웹 서버는 인터넷의 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공한다.

1.3 리소스

- 웹 리소스는 웹 콘텐츠의 원천이다.
- 가장 단순한 웹 리소스는 웹 서버 파일 시스템의 정적 파일(text, html, pdf, jpeg 등등)이다.
- 리소스는 반드시 정적 파일이어야 할 필요는 없다.

1.3.1 미디어타입

- HTTP는 웹에서 전송되는 객체 각각에 신중하게 __MIME__ 타입이라는 데이터 포맷 라벨을 붙인다.
- MIME(Multipurpose Internet Mail extensions, 다목적 인터넷 메일 확장)은 최조 전자메일 시스템사이으 문제점을 해결하기 위해 설계되었다.
- 웹브라우저는 서버로부터 객체를 돌려받을 때, __다룰수 있는 객체인지 MIME 타일을 통해 확인__ 한다.
- MIME 타입은 사선(/)으로 구분된 주 타입(primary object type)과 부 타입(speciic subtype)으로 이루어진 문자열 라벨이다. (text/html , image/jpeg 등등) 

1.3.2 URI

- 클라이언트는 관심 있는 리소스를 지목할 수 있다.
- 서버 리소스 이름은 통합 자원 식별자(URI)
- http://www.shop.com/dir/test.gif
- http 프로토로콜을 사용하고 www.shop.com으로 이동하여 dir/test.gif 리소스를 찾아오라

1.3.3 URL
- URL은 리소스 식별자의 가장 흔한 형태
- URL은 세가지 부분으로 이루어진다
- 첫번째, 리소스에 접근하기 위한 프로토콜을 서술(스킴이라고도 부른다)(http://)
- 두번째, 서버의 인터넷 주소를 제공(www.shop.com)
- 세번째, 웹 서버의 리소스(/dir/test.gif)

1.3.4 URN
- 리소스의 유일무이한 값
- 상세 내용은 2장에서

1.4 트렌잭션
- HTTP 트랜젝션 = 요청 명령 + 응답 결과
- HTTP 트랜젝션은 HTTP 메시지라는 데이터를 이용한다.

1.4.1 메서드
- 모든 HTTP 요청 메시지는 한 개의 메서드를 갖는다.
|HTTP 메서드|설명|
|:--|:--|
|GET| 서버에서 클라이언트로 지정한 리소스 전달|
|PUT| 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장|
|DELETE| 지정한 리소스를 서버에서 삭제|
|POST|클아이언트 데이터를 서버 게이트웨이 애플리케이션으로 전달|
|HEAD|지정한 리소스에 대한 응답에서 HTTP해더 부분만 전달|

1.4.2 상태 코드
- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.
- 숫자 상태 코드와 더불어 사유 구절(reason phrase)도 전달하지만, 실제 처리는 코드만 가지고 처리
- 숫자 상태 코드만 같다면, 사유 구절이 달라도 동일 처리
|HTTP 상태 코드|설명|
|:--|:--|
|200| 성공 |
|302| 다시 보내라. 다른 곳에 가서 리소스를 가져가라 |
|404| 리소스를 찾을 수 없음 |

1.4.3 웹페이지는 여러 객체로 이루어질 수 있다
- 애플리케이션은 하나의 작업을 수행하기 위해 다중의 HTTP 트랜잭션을 수행
- 웹페이지는 리소스의 모음이다

1.5 메시지
- HTTP 메시지는 단순한 줄 단위의 문자열이다.
- 이진 형식이 아닌 일반 텍스트이기 때문에 사람이 쓰기 편하다.
- 클라이언트가 서버로 보낸 HTTP 메시지를 요청 메시지라고 한다
- 서버에서 클라이언트로 가는 메시지는 응답 메시지라고 한다.
- 요청 메시지와 응답 메시지는 형식이 유사하다
- HTTP 메시지는 세 부분으로 이루어진다
- 시작줄
  - 요청이라면 무엇을 해야 하는지 응답이라면 무슨 일이 일어났는지 나타낸다
- 헤더
  - 시작줄 다음에 0개 이상의 헤더 필드가 이어진다
  - 헤더 필드는 키:값 형태로 구성된다
  - 헤더는 빈 줄로 끝난다.
- 본문
  - 빈 줄 다음에 어떤 종휴의 데이터든 들어갈 수 있는 메시지 본문이 온다
  - 요청의 본문은 웹 서버로 데이터를 전달 하며, 응답 본문은 클라이언트로 데이터를 반환한다.
  - 본문은 이진 데이터를 포함할 수 있다

1.5.1 간단한 메시지의 예

1.6 TCP 커넥션
- TCP(Transmission Control Protocol, 전송 제어 프로토콜)

1.6.1 TCP/IP
- HTTP는 애플리케이션 계층 프로토콜
- 신뢰성 있는 전송 프로토콜
  - 오류 없는 데이터 전송
  - 순서에 맞는 전달
  - 조각나지 않는 데이터 스트림
  - HTTP(애플리케이션 계층)|TCP(전송 계층)|IP(네트워크 계층)|네트워크를 위한 링크 인터페이스(데이터 링크 계층)|물리적인 네트워크 하드웨어(물리 계층)

1.6.2 접속, IP 주소 그리고 포트번호
- HTTP 클라이언트가 서버에 메시지 하려면, TCP/IP 커넥션 연결이 우선 조건
- TCP/IP 커넥션은 IP와 포트번호가 필요
- IP는 192.168.0.1과 같이 숫자형태이며 www.shop.com과 같은 문자이면 DNS에서 IP로 변경 가능하다.
- 포트번호는 :8080과 같이 특정되어 있으면 그대로 사용 아니면 프로토콜별로 설정된 기본값을 사용한다(http는 80, https는 443 등)
- 브라우저는 커넥션이 __닫히면__ 해당 메시지를 보여준다

1.6.3 텔넷을 이용한 실전 예제

1.7 프로토콜 버전
- HTTP/0.9
- HTTP/1.0
- HTTP/1.0+
- HTTP/1.1
- HTTP/2.0

1.8 웹의 구성요소

|명칭|설명|
|:--|:--|
|프락시| 클라이언트와 서버 사이에 위치한 HTTP 중계자 |
|캐시| 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고 |
|게이트웨이| 다른 어플리케이션과 연결된 특별한 웹 서버 |
|터널| 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시 |
|에이전트| 자동화된 HTTP 요청을 만드는 준지능적(semi-intelligent) 웹 클라이언트 |

1.8.1 프락시
- 클라이언트와 서버 사이에 위치하며, 클라이언트의 모든 HTTP 요청을 받아 서버에 전달한다.
- 주로 보안을 위해 사용된다
- 요청과 응답을 필터링한다.

1.8.2 캐시
- 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버다.
- 팔레토의 법칙

1.8.3 게이트웨이
- HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용
- 진짜 서버처럼 요청을 다룬다
- HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜을 이용하여 문서를 가져온다

1.8.4 터널
- 투 커넥션 사이의 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션
- 비 HTTP 데이트를 하나 이상의 HTTP 연결을 통해 그대로 전송하기 위해 사용

1.8.5 에이전트
- 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
- 웹 브라우저, 스파이터, 웹봇 등

1.9 시작의 끝



