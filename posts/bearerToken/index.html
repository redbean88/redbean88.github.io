<!DOCTYPE html><html lang="ko" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="bearer Token" /><meta property="og:locale" content="ko" /><meta name="description" content="Stateful 서버" /><meta property="og:description" content="Stateful 서버" /><link rel="canonical" href="https://redbean88.github.io/posts/bearerToken/" /><meta property="og:url" content="https://redbean88.github.io/posts/bearerToken/" /><meta property="og:site_name" content="dev note" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-11T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="bearer Token" /><meta name="twitter:site" content="@redbean88" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-12-13T00:24:28+09:00","datePublished":"2021-03-11T00:00:00+09:00","description":"Stateful 서버","headline":"bearer Token","mainEntityOfPage":{"@type":"WebPage","@id":"https://redbean88.github.io/posts/bearerToken/"},"url":"https://redbean88.github.io/posts/bearerToken/"}</script><title>bearer Token | dev note</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="dev note"><meta name="application-name" content="dev note"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/favicons/android-chrome-384x384.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">dev note</a></div><div class="site-subtitle font-italic">학습한것을 기록합니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/redbean88" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/redbean88" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['doctortor88','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>bearer Token</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>bearer Token</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> redbean88 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Mar 11, 2021, 12:00 AM +0900" >Mar 11, 2021<i class="unloaded">2021-03-11T00:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Dec 13, 2021, 12:24 AM +0900" >Dec 13, 2021<i class="unloaded">2021-12-13T00:24:28+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="536 words">2 min read</span></div></div><div class="post-content"><h2 id="stateful-서버">Stateful 서버</h2><p>클라이언트의 요청을 받을 때 마다, 클라이언트의 상태를 계속해서 유지하고, 그 정보를 서비스 제공에 이용 ex) 세션 |유지 서버</p><h2 id="stateless-서버">Stateless 서버</h2><p>상태를 유지하지 않는 서버 ( 확장성이 높아진다)</p><h2 id="서버-기반-인증의-문제점">서버 기반 인증의 문제점</h2><ul><li>세션<ul><li>유저수 증가에 따른 부하 증가(메모리 또는 기타)</ul><li>확장성<ul><li>트래픽 분산을 위한 확장의 어려움</ul><li>CORS<ul><li>여러 도매인에서 쿠키 관리의 어려움</ul></ul><h1 id="json-web-tokenjwt">Json Web Token(JWT)</h1><ul><li>용도<ul><li>회원인증<li>정보교환</ul><li>생김새<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Text "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>aaaaaa.bbbbbbb.ccccccccc
(header)(payload)(Signature)
</pre></table></code></div></div><li>해더(header)<ul><li>typ : 토큰 타입 (JWT)<li>alg : 해싱 알고리즘 (HMAC SHA256, RSA)<div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span>
<span class="dl">"</span><span class="s2">typ</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">JWT</span><span class="dl">"</span>
<span class="dl">"</span><span class="s2">alg</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">HMAC256</span><span class="dl">"</span>
<span class="p">}</span>
</pre></table></code></div></div></ul></ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>
<span class="kd">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">typ</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">JWT</span><span class="dl">"</span>
  <span class="dl">"</span><span class="s2">alg</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">HMAC256</span><span class="dl">"</span>
<span class="p">}</span>

<span class="c1">//encode to base64</span>
<span class="kd">const</span> <span class="nx">encodeHeader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">header</span><span class="p">))</span>
                                <span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">)</span>
                                <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">,</span><span class="dl">''</span><span class="p">);</span> <span class="c1">//패딩 제거</span>

</pre></table></code></div></div><ul><li>정보(payload)<ul><li>클레임<ul><li>정보의 한 <code class="language-plaintext highlighter-rouge">조각</code>을 클레임(claim)이라고 부름(name/value)<li>등록된(registered), 공개(public), 비공개(private) 으로 구분</ul><li>등록된(registered) 클레임<ul><li>이미 정해진 클레임<li>모두 선택적(optional)<li><div class="table-wrapper"><table><thead><tr><th style="text-align: left">클레임명<th style="text-align: left">상세내용<tbody><tr><td style="text-align: left">iss<td style="text-align: left">토큰발급자<tr><td style="text-align: left">sub<td style="text-align: left">토큰제목<tr><td style="text-align: left">aud<td style="text-align: left">토큰대상자<tr><td style="text-align: left">exp<td style="text-align: left">토큰 만료시간(numbericDate)<tr><td style="text-align: left">nbf<td style="text-align: left">토큰 활성시간(Not Before)<tr><td style="text-align: left">iat<td style="text-align: left">토큰이 발급된 시간(age파악가능)<tr><td style="text-align: left">jti<td style="text-align: left">JWT 고유 식별자</table></div></ul><li>공개(public)클레임<ul><li>충돌 방지된 이름(URI 형식의 이름을 가짐)<div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">{</span>
<span class="dl">"</span><span class="s2">https://linkHub.com</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></table></code></div></div></ul><li>비공개(private) 클레임<ul><li>클라이언트와 서버의 형희하에 사용되는 클레임 이름<li>충돌 가능성이 있음<div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">{</span>
<span class="dl">"</span><span class="s2">username</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span>
<span class="p">}</span>
</pre></table></code></div></div></ul></ul><li>예제</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span>
  <span class="dl">"</span><span class="s2">iss</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">LinkHub.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">exp</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1485300000000</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">https://linkHub.com</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span>

<span class="p">}</span>
</pre></table></code></div></div><ul><li>서명(Signature)<ul><li>해더의 인코딩값과, 정보의 인코딩 값을 합친후 비밀키로 해쉬를 생성<li>hex =&gt; base64 인코딩<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Text "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload) , secret)
</pre></table></code></div></div></ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">secret</span><span class="dl">'</span><span class="p">)</span>
                              <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">encodeHeader</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">.</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">encodepayload</span><span class="p">)</span>
                              <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">)</span>
                              <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">,</span><span class="dl">''</span><span class="p">);</span> <span class="c1">//패딩 제거</span>

</pre></table></code></div></div><ul><li>토큰 완성</ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/auth/'>auth</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=bearer Token - dev note&url=https://redbean88.github.io/posts/bearerToken/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=bearer Token - dev note&u=https://redbean88.github.io/posts/bearerToken/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=bearer Token - dev note&url=https://redbean88.github.io/posts/bearerToken/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/JPA-CH05/">자바 ORM 표준 JPA 프로그래밍(희망편05)</a><li><a href="/posts/JPA-CH06/">자바 ORM 표준 JPA 프로그래밍(희망편06)</a><li><a href="/posts/JPA-CH07/">자바 ORM 표준 JPA 프로그래밍(희망편07)</a><li><a href="/posts/JPA-CH09/">자바 ORM 표준 JPA 프로그래밍(희망편09)</a><li><a href="/posts/JPA-CH08/">자바 ORM 표준 JPA 프로그래밍(희망편08)</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/JPA-CH08/"><div class="card-body"> <span class="timeago small" >May 16, 2022<i class="unloaded">2022-05-16T22:20:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 ORM 표준 JPA 프로그래밍(희망편08)</h3><div class="text-muted small"><p> Chapter 08. 값 타입 JPA의 데이터 타입을 가장 크게 분류하면 엔티티 타입과 값 타입으로 나눌 수 있다. 엔티티 타입은 @Entity로 정의하는 객체이고, 값 타입은 int, Integer, String처럼 단순히 값으로 사용하는 자바 기본 타입이나 객체를 말한다. 엔티티 타입은 식별자를 통해 지속해서 추적할 수 있지만, 값 타입은 추...</p></div></div></a></div><div class="card"> <a href="/posts/JPA-CH09/"><div class="card-body"> <span class="timeago small" >May 16, 2022<i class="unloaded">2022-05-16T21:20:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 ORM 표준 JPA 프로그래밍(희망편09)</h3><div class="text-muted small"><p> Chapter 10. 객체지향 쿼리 언어 이장의 내용 객체지향 쿼리 소개 JPQL Criteria QueryDSL 네이티브 SQL 객체지향 쿼리 심화 9.1 객체지향 쿼리 소개 테이블이 아닌 객체를 대상으로 검색하는 객체지향 쿼리다. SQL을 추상화해서 특정 데이터베이스 SQ...</p></div></div></a></div><div class="card"> <a href="/posts/JPA-CH07/"><div class="card-body"> <span class="timeago small" >May 16, 2022<i class="unloaded">2022-05-16T21:20:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 ORM 표준 JPA 프로그래밍(희망편07)</h3><div class="text-muted small"><p> Chapter 07. 프록시와 연관관계 관리 프록시와 즉시 로딩, 지연 로딩 영속성 전이와 고아 객체 7.1 프록시 엔티티를 조회할 때 연관된 엔티티들이 항상 사용되는 것은 아니다. printUserAndTeam() 메서드는 memberId로 회원 엔티티를 찾아서 연관된 팀의 이름도 출력한다. 반면 printUser...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/whiteship-study-15week/" class="btn btn-outline-primary" prompt="Older"><p>자바스터디 15주차</p></a> <a href="/posts/TIL-webhook/" class="btn btn-outline-primary" prompt="Newer"><p>webhook</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://redbean88.github.io/posts/bearerToken/'; this.page.identifier = '/posts/bearerToken/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://redbean88-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://redbean88.github.io">redbean88</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LR635TNW07"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LR635TNW07'); }); </script>
